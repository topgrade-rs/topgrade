name: derive-tag-name
description: Derive the tag name from release event or workflow_dispatch input
outputs:
  tag_name:
    description: Resolved tag name
    value: ${{ steps.derive.outputs.tag_name }}
runs:
  using: composite
  steps:
    - id: derive
      name: Determine tag name
      shell: bash
      run: |
        if [ -n "${{ github.event.release.tag_name }}" ]; then
          echo "tag_name=${{ github.event.release.tag_name }}" >> $GITHUB_OUTPUT
        else
          echo "tag_name=${{ github.event.inputs.existing_tag }}" >> $GITHUB_OUTPUT
        fi
